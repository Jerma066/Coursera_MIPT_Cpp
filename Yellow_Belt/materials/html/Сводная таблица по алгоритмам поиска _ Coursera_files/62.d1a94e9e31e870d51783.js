(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"2Lb7":function(module,e,t){"use strict";var n=t("VbXa"),o=t.n(n),s=t("17x9"),r=t.n(s),i=t("sbe7"),a=t.n(i),u=t("5BCV");e.a=function(e){return function(t){var n=t.displayName||t.name,s=function(n){function RedirectWrapper(){for(var e,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return(e=n.call.apply(n,[this].concat(o))||this).state={haveRedirected:!1},e}o()(RedirectWrapper,n);var s=RedirectWrapper.prototype;return s.componentWillMount=function componentWillMount(){this.conditionallyRedirect(this.props)},s.componentWillReceiveProps=function componentWillReceiveProps(e){this.conditionallyRedirect(e)},s.conditionallyRedirect=function conditionallyRedirect(t){var n=e(t),o=n.redirectUrl,s=n.shouldRedirect;!this.state.haveRedirected&&s&&(this.setState({haveRedirected:!0}),this.context.router.push(o))},s.render=function render(){var n,o;if(e(this.props).shouldRedirect)return null;return a.a.createElement(t,this.props)},RedirectWrapper}(a.a.Component);return s.displayName=n+"RedirectWrapper",s.contextTypes={router:r.a.object.isRequired},Object(u.default)(s,t),s}}},EuT7:function(module,exports,e){var t=e("Frej"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var o={transform:void 0},s=e("aET+")(t,o);t.locals&&(module.exports=t.locals)},Frej:function(module,exports,e){},GC28:function(module,e,t){"use strict";var n=t("VbXa"),o=t.n(n),s=t("17x9"),r=t.n(s),i=t("sbe7"),a=t.n(i),u=t("QjkW"),c=t("+2ZD"),l=t("AhVq"),d=t("KMW/"),p=t("8cuT"),h=t.n(p),m=t("GP6s"),f=t.n(m),v=t("EuT7"),y=t.n(v),C=function getLocalStorageKey(e){return"discussionSurveyDisplayed.".concat(e)},b=function(e){function DiscussionSatisfactionSurveyModal(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).state={showModal:!1,nextLocation:null,userConfirmed:!1},t.handleOpenSurvey=function(){l.a.safelyOpenUrl("https://www.surveymonkey.com/r/RJ22ZPH"),t.handleContinue()},t.handleContinue=function(){u.a.set(C(t.props.courseId),!0),t.setState({userConfirmed:!0,showModal:!1},function(){t.context.router.push(t.state.nextLocation)})},t.routerWillLeave=function(e){var n=t.props,o=n.courseId,s=n.sessionId,r=t.state,i=r.userConfirmed,a=r.nextLocation;if(i)return!0;if(e){var c=d.a.get("DiscussionsSatisfactionSurvey","showSatisfactionSurvey",{course_id:o,ondemand_session_id:s}),l=u.a.get(C(o));if(!c||a||l)return!0;return t.setState({showModal:!0,nextLocation:e}),!1}return!0},t}o()(DiscussionSatisfactionSurveyModal,e);var t=DiscussionSatisfactionSurveyModal.prototype;return t.componentDidMount=function componentDidMount(){this.context.router.setRouteLeaveHook(this.props.currentRoute,this.routerWillLeave)},t.render=function render(){var e=this.state.showModal;return a.a.createElement("div",{className:"rc-DiscussionSatisfactionSurveyModal"},e&&a.a.createElement(c.a,{allowClose:!0,handleClose:this.handleContinue,className:"DiscussionSatisfactionModal",trackingName:"discussion_satisfaction_survey",modalName:f()("Discussion Forums Satisfaction")},a.a.createElement("h4",null,f()("Please take a short survey to help us improve the discussion forums.")),a.a.createElement("div",null,a.a.createElement("button",{className:"survey-open primary",onClick:this.handleOpenSurvey},f()("Open survey in new tab"))),a.a.createElement("div",null,a.a.createElement("button",{className:"survey-continue button-link",onClick:this.handleContinue},f()("No thanks, continue to next page")))))},DiscussionSatisfactionSurveyModal}(a.a.Component);b.propTypes={currentRoute:r.a.object.isRequired,courseId:r.a.string,sessionId:r.a.string},b.contextTypes={router:r.a.object.isRequired},e.a=h()(b,["SessionStore"],function(e){var t;return{sessionId:e.SessionStore.getSessionId()}})},pZ5z:function(module,e,t){"use strict";t.r(e),t.d(e,"default",function(){return R});var n=t("VbXa"),o=t.n(n),s=t("17x9"),r=t.n(s),i=t("sbe7"),a=t.n(i),u=t("VYij"),c=t.n(u),l=t("GC28"),d=t("FO9Q"),p=t("7jZ/"),h=t("L1vm"),m=t("b+bd"),f=t("2Lb7"),v=t("ngyh"),y=t.n(v),C=t("UU2Q"),b=t("GP6s"),S=t.n(b),g=function(e){function CourseHomeDiscussionsPage(){return e.apply(this,arguments)||this}var t;return o()(CourseHomeDiscussionsPage,e),CourseHomeDiscussionsPage.prototype.render=function render(){var e=this.props,t=e.courseName,n=e.route,o=e.courseId,s=S()("#{courseName} - Discussions",{courseName:t});return a.a.createElement("div",{className:"rc-CourseHomeDiscussionsPage"},a.a.createElement(l.a,{currentRoute:n,courseId:o}),a.a.createElement(d.a,{title:s}),this.props.children)},CourseHomeDiscussionsPage}(a.a.Component);g.propTypes={route:r.a.object.isRequired,courseId:r.a.string,courseName:r.a.string,children:r.a.node};var x=Object(u.compose)(h.a.createTrackedContainer(function(){return{namespace:{page:"discussions"}}}),Object(m.a)(["CourseStore","CourseMembershipStore","ApplicationStore"],function(e,t){var n=e.CourseStore,o=e.CourseMembershipStore,s=e.ApplicationStore,r=o.isEnrolled()&&!o.isPreEnrolled(),i=n.getCourseId(),a=o.hasModerationRole()||s.isSuperuser(),u=r;return{courseId:i,courseName:n.getMetadata().get("name"),courseRootPath:n.getCourseRootPath(),canAccessDiscussions:!Object(p.a)(i)&&(u||a)}}),Object(f.a)(function(e){var t,n;return{redirectUrl:e.courseRootPath,shouldRedirect:!e.canAccessDiscussions}}))(g),R=function(e){function FluxibleCourseHomeDiscussionsPage(){return e.apply(this,arguments)||this}o()(FluxibleCourseHomeDiscussionsPage,e);var t=FluxibleCourseHomeDiscussionsPage.prototype;return t.componentWillMount=function componentWillMount(){this.fluxibleContext=Object(C.a)(this.context.fluxibleContext)},t.render=function render(){return a.a.createElement(y.a,{context:this.fluxibleContext.getComponentContext()},a.a.createElement(x,this.props))},FluxibleCourseHomeDiscussionsPage}(a.a.Component);R.contextTypes={fluxibleContext:r.a.object}}}]);
//# sourceMappingURL=62.d1a94e9e31e870d51783.js.map